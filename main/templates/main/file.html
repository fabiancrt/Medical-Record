{% extends 'main/base.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}File Details{% endblock %}
{% block content %}

<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            {{ file.filename }}
        </div>
        <div class="card-body">
            <p><strong>Uploaded by:</strong> {{ file.user.username }}</p>
            <p><strong>Date specified:</strong> {{ file.uploaded_at|date:"Y-m-d" }}</p>
            <p><strong>Actual upload date:</strong> {{ file.uploaded_at|date:"Y-m-d H:i:s" }}</p>
            <p><strong>File Type:</strong> {{ file.filename|slice:"-4:" }}</p>
            
            <div class="file-display">
                {% if file.filename and file.filename|endswith:".jpg" %}
                    <div class="image-preview">
                        <img src="{{ file.file.url }}" alt="{{ file.filename }}" class="img-fluid">
                    </div>
                {% elif file.filename and file.filename|endswith:".jpeg" %}
                    <div class="image-preview">
                        <img src="{{ file.file.url }}" alt="{{ file.filename }}" class="img-fluid">
                    </div>
                {% elif file.filename and file.filename|endswith:".png" %}
                    <div class="image-preview">
                        <img src="{{ file.file.url }}" alt="{{ file.filename }}" class="img-fluid">
                    </div>
                {% elif file.filename and file.filename|endswith:".pdf" %}
                    <embed src="{{ file.file.url }}" type="application/pdf" width="100%" height="600px" />
                {% elif file.filename %}
                    <a href="{{ file.file.url }}" download>{{ file.filename }}</a>
                {% endif %}
            </div>
            
            <a href="{% url 'delete_file' file.id %}" class="btn btn-danger btn-sm mt-2">
                <i class="fas fa-trash-alt"></i> Delete
            </a>
            <a href="{{ file.file.url }}" download="{{ file.filename }}" class="btn btn-primary btn-sm mt-2 ml-2">
                <i class="fas fa-download"></i> Download
            </a>
        </div>
    </div>
</div>
<link rel="stylesheet" type="text/css" href="{% static 'css/file.css' %}">
{% endblock %}